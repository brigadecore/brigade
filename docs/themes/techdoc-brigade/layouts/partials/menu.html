{{ $currentPage := . }}
{{- if .Site.Menus.index -}}
<nav>
  <ul>
    {{- range .Site.Menus.index.ByWeight -}}
      {{ if .HasChildren -}}
      <li class="parent{{ if $currentPage.HasMenuCurrent "index" . }} active{{ end }}"><a href="{{ .URL | absURL }}">{{- .Name -}} <i class="fas fa-angle-right"></i></a>
        
        <ul class="sub-menu">
          {{ range .Children -}}
          <li class="child{{ if $currentPage.HasMenuCurrent "index" . }} active{{ end }}"><a href="{{ .URL | absURL }}">{{ .Name }}</a></li>
          {{ end -}}
        </ul>
      </li>
      {{- else }}
      <li{{ if $currentPage.HasMenuCurrent "index" . }} class="active"{{ end }}><a href="{{ .URL | absURL }}">{{- .Name -}}</a></li>
      {{- end -}}
    {{- end -}}
  </ul>
</nav>
{{- end }}
